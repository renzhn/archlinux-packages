# Maintainer: renzhn <renznn@gmail.com>
pkgname=meow-proxy
pkgver=1.0
pkgrel=1
pkgdesc="MEOW is a fork of COW that uses whitelist mode"
arch=('i686' 'x86_64' 'arm')
url="https://github.com/renzhn/MEOW"
license=('custom')
depends=()
makedepends=()
source=(meow@.service
        meow_user.service)
sha1sums=('fc782d7b2fbd76d0e76996147bf568ffe67bae2e'
          'b2fed168ed41808332b40c7c48299174ec508a9d'
          )
conflicts=(meow-proxy-git)

if [ "$CARCH" == x86_64 ]; then
        source+=(meow-$pkgver.gz::http://meowproxy.me/dist/MEOW-linux-amd64-$pkgver.gz)
        sha1sums+=('43773611162d64240de66fcbd20a9956b7911f2b')
elif [ "$CARCH" == i686 ]; then
        source+=(meow-$pkgver.gz::http://meowproxy.me/dist/MEOW-linux-386-$pkgver.gz)
        sha1sums+=('8f59081a506fa4dcb13f6e1ec06c3dd94fd39010')
fi

install=$pkgname.install

package() {
  mkdir -p $pkgdir/usr/bin
  install -m755 $srcdir/meow-$pkgver $pkgdir/usr/bin/meow
  install -Dm644 meow@.service ${pkgdir}/usr/lib/systemd/system/meow@.service
  install -Dm644 meow_user.service ${pkgdir}/usr/lib/systemd/user/meow.service
}
